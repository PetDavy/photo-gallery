(this["webpackJsonpreact-app"]=this["webpackJsonpreact-app"]||[]).push([[0],{29:function(t,e,n){},31:function(t,e,n){},34:function(t,e,n){},35:function(t,e,n){},36:function(t,e,n){},37:function(t,e,n){},38:function(t,e,n){},39:function(t,e,n){},40:function(t,e,n){},41:function(t,e,n){},42:function(t,e,n){},46:function(t,e,n){"use strict";n.r(e);var c=n(0),a=n(1),s=n.n(a),o=n(21),r=n.n(o),i=n(13),l=n(2),u=(n(29),n(3)),h=n(6),j=n.n(h),d=n(10),b="https://picsum.photos";function p(t){var e=t.width/t.height,n={width:"400",height:"".concat(Math.round(4/e),"00")};return{id:t.id,size:n,url:"".concat(b,"/id/").concat(t.id,"/").concat(n.width,"/").concat(n.height)}}var f=function(){var t=Object(d.a)(j.a.mark((function t(e,n){var c,a,s;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(b,"/v2/list?page=").concat(n,"&limit=").concat(e));case 2:return c=t.sent,t.next=5,c.json();case 5:return a=t.sent,s=a.map(p),t.abrupt("return",s);case 8:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),m=function(t){return Promise.all(t.map((function(t){return function(t){return fetch("".concat(b,"/id/").concat(t,"/info")).then((function(t){return t.json()})).then(p)}(t)})))},O=function(){var t=Object(d.a)(j.a.mark((function t(e){var n,c;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(b,"/id/").concat(e,"/info"));case 2:return n=t.sent,t.next=5,n.json();case 5:return c=t.sent,t.abrupt("return",c);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),x=(n(31),function(t){var e=t.currentPage,n=t.changePage;return Object(c.jsxs)("div",{className:"Pagination",children:[Object(c.jsx)("button",{type:"button",onClick:function(){return n(e-1)},className:"Pagination__btn",disabled:1===e,children:Object(c.jsx)("i",{className:"fas fa-arrow-left"})}),Object(c.jsx)("button",{type:"button",className:"Pagination__btn",children:e}),Object(c.jsx)("button",{type:"button",onClick:function(){return n(e+1)},className:"Pagination__btn",children:Object(c.jsx)("i",{className:"fas fa-arrow-right"})})]})}),g=n(5),_=n.n(g),v=(_.a.string.isRequired,_.a.shape({width:_.a.string,height:_.a.string}),_.a.string.isRequired,n(23)),P=function(t){localStorage.setItem("photos",t)},N=function(t,e){localStorage.setItem("limit",t),localStorage.setItem("page",e)},y=(n(34),function(t){var e=t.photo,n=t.pinPhoto,a=t.openPhoto,s=t.isPined;return Object(c.jsxs)("div",{className:"Photo",style:{gridRow:"span ".concat(e.size.height/100)},children:[Object(c.jsx)("img",{width:"".concat(e.size.width,"px"),height:"".concat(e.size.height,"px"),src:e.url,alt:"something",className:"Photo__img",onClick:function(){return a(e.id)},role:"presentation"}),Object(c.jsx)("button",{type:"button",className:"Photo__pin-btn",onClick:function(){var t;n((function(n){return s?(t=n.filter((function(t){return t!==e.id})),P(t),t):(t=[].concat(Object(v.a)(n),[e.id]),P(t),t)}))},children:s?Object(c.jsx)("i",{className:"fas fa-heart"}):Object(c.jsx)("i",{className:"far fa-heart"})})]})}),w=n(11),M=n.n(w),k=(_.a.string,_.a.string,_.a.number,_.a.number,_.a.string,_.a.string,n(35),function(t){var e=t.photos,n=t.currentPhoto,a=t.currentIndex,s=t.isOpen,o=t.toggle;return Object(c.jsxs)("div",{className:"GalleryBar",children:[Object(c.jsx)("div",{className:"GalleryBar__author",children:n.author}),Object(c.jsx)("div",{className:"GalleryBar__list-wrapper",children:Object(c.jsx)("ul",{className:"GalleryBar__list",children:e.map((function(t,e){return Object(c.jsx)("li",{children:Object(c.jsx)("img",{src:t.url,alt:t.id,className:M()("GalleryBar__small-photo",{"GalleryBar__small-photo--active":e===a}),style:{transform:"translateX(".concat(267+-89*a,"px)")}})},t.id)}))})}),Object(c.jsx)("button",{type:"button",className:"GalleryBar__toggler",onClick:function(){return o(!s)},children:Object(c.jsx)("i",{className:M()("fas",{"fa-chevron-up":!s,"fa-chevron-down":s})})}),e.length]})}),S=(n(36),function(t){var e=t.photos,n=t.photoId,s=t.closeModalGallery,o=t.setCurrentModalPhotoId,r=Object(a.useState)({}),i=Object(l.a)(r,2),u=i[0],h=i[1],b=Object(a.useState)(0),p=Object(l.a)(b,2),f=p[0],m=p[1],x=Object(a.useState)(!1),g=Object(l.a)(x,2),_=g[0],v=g[1],P=function(){var t=Object(d.a)(j.a.mark((function t(n){var c;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,O(n);case 2:c=t.sent,h(c),m(e.findIndex((function(t){return t.id===c.id})));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();Object(a.useEffect)((function(){P(n)}),[n]);return Object(c.jsxs)("div",{className:M()("ModalGallery",{"ModalGallery--open-bar":_}),children:[Object(c.jsx)("div",{className:"ModalGallery__count-info",children:"".concat(f+1,"/").concat(e.length)}),u&&Object(c.jsx)("div",{className:"ModalGallery__photo-frame",children:Object(c.jsx)("img",{src:u.download_url,alt:u.author,style:{height:"100%"}})}),Object(c.jsx)("button",{type:"button",className:"ModalGallery__left-btn",onClick:function(){o(f-1<0?e[e.length-1].id:e[f-1].id)},children:Object(c.jsx)("i",{className:"fas fa-chevron-left"})}),Object(c.jsx)("button",{type:"button",className:"ModalGallery__right-btn",onClick:function(){f+1>=e.length?o(e[0].id):o(e[f+1].id)},children:Object(c.jsx)("i",{className:"fas fa-chevron-right"})}),Object(c.jsx)("button",{type:"button",className:"ModalGallery__close-btn",onClick:s,children:Object(c.jsx)("i",{className:"fas fa-times"})}),Object(c.jsx)(k,{photos:e,currentPhoto:u,currentIndex:f,isOpen:_,toggle:v})]})}),G=(n(37),function(t){var e=t.photos,n=t.pinedPhotos,s=t.pinPhoto,o=Object(a.useState)(null),r=Object(l.a)(o,2),i=r[0],u=r[1],h=Object(a.useState)(!1),j=Object(l.a)(h,2),d=j[0],b=j[1],p=function(t){u(t),b(!0)};return Object(c.jsxs)("div",{className:"Photos",children:[e.map((function(t){return Object(c.jsx)(y,{photo:t,pinPhoto:s,openPhoto:p,isPined:n.includes(t.id)},t.id)})),d&&Object(c.jsx)(S,{photos:e,photoId:i,setCurrentModalPhotoId:u,closeModalGallery:function(){b(!1)}})]})}),C=(n(38),function(t){var e=t.limit,n=t.setLimit,s=t.changeLimit,o=t.photosAmount,r=Object(a.useState)(!1),i=Object(l.a)(r,2),u=i[0],h=i[1];return u?Object(c.jsxs)("label",{className:"PhotosLimit__label",children:[Object(c.jsx)("input",{type:"number",min:"1",max:"100",value:e,className:"PhotosLimit__input",autoFocus:!0,onChange:function(t){var e=Number(t.target.value);n(e)},onBlur:function(t){return e>100?(n(100),void t.target.focus()):e<1?(n(1),void t.target.focus()):(s(),void h(!1))}}),Object(c.jsx)("h3",{children:"photos"})]}):Object(c.jsxs)("div",{className:"PhotosLimit__title",children:[Object(c.jsx)("h3",{children:"".concat(o," photos")}),Object(c.jsx)("button",{type:"button",onClick:function(){return h(!0)},className:"PhotosLimit__pen-btn",children:Object(c.jsx)("i",{className:"fas fa-pen"})})]})}),I=(n(39),function(t){var e=t.pinedPhotos,n=t.pinPhoto,s=function(){var t=localStorage.getItem("limit"),e=localStorage.getItem("page");return t&&e?{limit:t,page:e}:{limit:30,page:1}}(),o=s.limit,r=s.page,i=Object(a.useState)([]),u=Object(l.a)(i,2),h=u[0],b=u[1],p=Object(a.useState)(!0),m=Object(l.a)(p,2),O=m[0],g=m[1],_=Object(a.useState)(+o),v=Object(l.a)(_,2),P=v[0],y=v[1],w=Object(a.useState)(+r),M=Object(l.a)(w,2),k=M[0],S=M[1],I=function(){var t=Object(d.a)(j.a.mark((function t(){var e;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f(P,k);case 2:e=t.sent,b(e),g(!1),N(P,k);case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(a.useEffect)((function(){I()}),[k]),Object(c.jsxs)("div",{className:"Gallery",children:[Object(c.jsx)("h2",{className:"Gallery__title",children:"Gallery"}),Object(c.jsx)(C,{changeLimit:function(){I(P)},limit:P,setLimit:y,photosAmount:h.length}),O&&Object(c.jsx)("h2",{children:"Loading..."}),Object(c.jsx)(G,{photos:h,pinedPhotos:e,pinPhoto:n}),Object(c.jsx)(x,{currentPage:k,changePage:S})]})}),L=(n(40),function(t){var e=t.photo,n=t.setMyPhotos,s=t.openPhoto,o=t.setPinedPhotos,r=Object(a.useState)(!1),i=Object(l.a)(r,2),u=i[0],h=i[1],j=function(){n((function(t){var n=t.filter((function(t){return t.id!==e.id})),c=n.map((function(t){return t.id}));return P(c),o(c),n}))};return Object(c.jsxs)("div",{className:M()("MyPhoto",{"MyPhoto__on-remove":u}),style:{gridRow:"span ".concat(e.size.height/100)},children:[Object(c.jsx)("img",{width:"".concat(e.size.width,"px"),height:"".concat(e.size.height,"px"),src:e.url,alt:"something",className:"MyPhoto__img",onClick:function(){return s(e.id)},role:"presentation"}),Object(c.jsx)("button",{type:"button",onClick:function(){h(!0),setTimeout(j,600)},className:"MyPhoto__remove-btn",children:"remove"})]})}),H=(n(41),function(t){var e=t.pinedPhotos,n=t.setPinedPhotos,s=Object(a.useState)([]),o=Object(l.a)(s,2),r=o[0],i=o[1],u=Object(a.useState)(null),h=Object(l.a)(u,2),b=h[0],p=h[1],f=Object(a.useState)(!1),O=Object(l.a)(f,2),x=O[0],g=O[1],_=function(t){p(t),g(!0)},v=function(){var t=Object(d.a)(j.a.mark((function t(){var n;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m(e);case 2:n=t.sent,i(n);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(a.useEffect)((function(){v(e)}),[]),r.length?Object(c.jsxs)("div",{className:"MyPhotos",children:[Object(c.jsx)("h2",{className:"MyPhotos__title",children:"my favourites"}),Object(c.jsx)("div",{className:"MyPhotos__list",children:r.map((function(t){return Object(c.jsx)(L,{photo:t,setMyPhotos:i,openPhoto:_,setPinedPhotos:n},t.id)}))}),x&&Object(c.jsx)(S,{photos:r,photoId:b,setCurrentModalPhotoId:p,closeModalGallery:function(){g(!1)}})]}):Object(c.jsx)("h1",{className:"MyPhotos__no-photo",children:"No Photos"})}),B=(n(42),function(t){var e=t.pinedPhotosLength;return Object(c.jsxs)("header",{className:"App__header Header",children:[Object(c.jsx)("div",{className:"Header__tools",children:Object(c.jsxs)("div",{className:"Header__like-icon",children:[Object(c.jsx)("i",{className:"far fa-heart"}),Object(c.jsx)("span",{className:"Header__counter",children:e})]})}),Object(c.jsx)("nav",{className:"Header__nav",children:Object(c.jsxs)("ul",{className:"Header__links",children:[Object(c.jsx)("li",{className:"Header__link",children:Object(c.jsx)(i.b,{to:"/",children:"Home"})}),Object(c.jsx)("li",{className:"Header__link",children:Object(c.jsx)(i.b,{to:"/my-photos",children:"Favourites"})})]})}),Object(c.jsx)("div",{className:"Header__company",children:Object(c.jsx)("span",{children:"TemplateMonster"})})]})}),z=function(){var t=Object(a.useState)(function(){var t=localStorage.getItem("photos");return t?t.split(","):[]}()),e=Object(l.a)(t,2),n=e[0],s=e[1];return Object(c.jsxs)("div",{className:"App",children:[Object(c.jsx)(B,{pinedPhotosLength:n.length}),Object(c.jsx)("h1",{className:"App__title",children:"Lorem Picsum"}),Object(c.jsxs)(u.c,{children:[Object(c.jsx)(u.a,{exact:!0,path:"/",children:Object(c.jsx)(I,{pinedPhotos:n,pinPhoto:s})}),Object(c.jsx)(u.a,{path:"/my-photos",children:Object(c.jsx)(H,{pinedPhotos:n,setPinedPhotos:s})})]}),Object(c.jsx)("footer",{className:"App__footer",children:"Copyright 2020 \xb7 All rights reserved"})]})};r.a.render(Object(c.jsx)(s.a.StrictMode,{children:Object(c.jsx)(i.a,{children:Object(c.jsx)(z,{})})}),document.getElementById("root"))}},[[46,1,2]]]);
//# sourceMappingURL=main.c574c573.chunk.js.map